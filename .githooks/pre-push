#!/bin/bash

# 1. SHIBUYA MOKUROKU: Tresor-Check
# PrÃ¼fen, ob der notes-Ordner existiert (Klartext vorhanden)
if [ -d "mokuroku/notes" ]; then
    echo "ğŸ”’ SHIBUYA: UnverschlÃ¼sselte Notizen gefunden. Versiegle Tresor..."
    pnpm mokuroku:lock

    # Da lock die .vault Datei Ã¤ndert, mÃ¼ssen wir diese Ã„nderungen
    # eigentlich committen. Im pre-push ist das schwierig.
    # Empfehlung: Abbruch, damit der User den Vault-Commit bewusst machen kann.
    echo "âš ï¸  Notizen wurden versiegelt. Bitte 'notes.vault' committen und erneut pushen."
    exit 1
fi

# 2. SHIBUYA git-bug Synchronisation
if command -v git-bug >/dev/null 2>&1; then
    echo "ğŸ SHIBUYA: Pushe Bugs zu origin..."
    git-bug push origin
else
    echo "âš ï¸  SHIBUYA: git-bug nicht gefunden. Bugs wurden nicht synchronisiert."
fi

exit 0
